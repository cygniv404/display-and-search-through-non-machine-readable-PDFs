(this.webpackJsonpdnlab=this.webpackJsonpdnlab||[]).push([[0],{23:function(e,t,a){e.exports=a(37)},32:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),u=a.n(c),s=a(1),l=a(11),i=a(8),o=a(16),m=function(e){var t=e.data,a=e.handelToken;return r.a.createElement("div",{className:"text-field w-100 "},t.map((function(e){var t=e.text,n=e.token_id;return r.a.createElement("div",{className:"text w-100 pa2",key:n,id:n,onMouseEnter:a},t)})))},f=a(19),p=a.n(f);var b=function(e){var t=e.image,a=e.mapAreas,c=Object(n.useRef)(null),u=Object(n.useState)(1),l=Object(s.a)(u,2),i=(l[0],l[1]);return Object(n.useEffect)((function(){i(Math.random())}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{ref:c,src:t,map:a,width:800,imgWidth:2481}))},d=a(3),h=a.n(d),v=a(7);function g(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1],u=Object(n.useState)(!0),l=Object(s.a)(u,2),i=l[0],o=l[1];function m(){return(m=Object(v.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/images/"+e);case 2:return a=t.sent,t.next=5,a.blob();case 5:n=t.sent,c(URL.createObjectURL(n)),o(!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),[r,i]}var j=function(e){var t=e.imageID,a=e.parentQuery,c=e.handelFetchedData,u=Object(n.useState)(a.toString()),l=Object(s.a)(u,2),i=l[0],o=l[1],m=Object(n.useState)([]),f=Object(s.a)(m,2),p=f[0],b=f[1],d=function(){var e=Object(v.a)(h.a.mark((function e(){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/data/"+t);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,r=n.filter((function(e){return-1!==e.text.toLowerCase().indexOf(i.toLowerCase())})),i.length>0?r.length>0?b(r):b([]):b(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a.length>0&&o(a),c(p)}),[p]),r.a.createElement("div",{className:"wrap"},r.a.createElement("form",{className:"search",onSubmit:function(e){e.preventDefault(),d()}},r.a.createElement("input",{type:"text",className:"searchTerm",placeholder:"What are you looking for?",onChange:function(e){o(e.target.value)},defaultValue:a}),r.a.createElement("input",{type:"submit",value:"search"})))};var O=function(e){var t=e.match,a=e.parentQuery,c=t.params.imageId,u=Object(n.useState)([]),l=Object(s.a)(u,2),i=l[0],f=l[1],p=g(c),d=Object(s.a)(p,2),h=d[0],v=d[1],O=Object(n.useState)({name:"my-map",areas:[{id:0,shape:"rect",coords:[0,0,0,0],preFillColor:"rgba(0,0,0,0.01)",strokeColor:"rgba(0,255,0,1)"}]}),x=Object(s.a)(O,2),E=x[0],w=x[1];return Object(n.useEffect)((function(){!function(e){var t=[];e.map((function(e){var a=e.token_id,n=e.x1,r=e.y1,c=e.x2,u=e.y2;return t.push({id:a,shape:"rect",coords:[n,r,c,u],preFillColor:"rgba(0,0,0,0.01)",strokeColor:"rgba(0,255,0,1)"})})),w({name:E.name,areas:t})}(i)}),[i]),r.a.createElement("div",{className:"container flex w-100"},r.a.createElement("nav",{className:"gn-menu-wrapper w-30 flex flex-wrap"},r.a.createElement(j,{imageID:c,parentQuery:a,handelFetchedData:function(e){f(e)}}),r.a.createElement(m,{data:i,handelToken:function(e){var t=e.target.id,a=i.filter((function(e){return e.token_id===t})),n=Object(s.a)(a,1)[0];n.x1,n.x2,n.y1,n.y2;!function(e,t){var a=E.areas.map((function(t){return t.id===e?Object(o.a)({},t,{preFillColor:"rgba(0,0,0,0.08)",strokeColor:"rgba(255,0,0,1)"}):Object(o.a)({},t,{preFillColor:"rgba(0,0,0,0.01)",strokeColor:"rgba(0,255,0,1)"})}));w({name:E.name,areas:a})}(t)}})),r.a.createElement("header",{className:"flex w-70 pa2 justify-center items-center"},v?r.a.createElement("div",null,"loading"):r.a.createElement(b,{image:h,mapAreas:E})))},x=(a(32),a(20)),E=(a(33),function(e){var t=e.imageIds,a=e.selectedImages,c=Object(n.useState)([]),u=Object(s.a)(c,2),i=u[0],o=u[1];return Object(n.useEffect)((function(){function e(e){return a.apply(this,arguments)}function a(){return(a=Object(v.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/images/"+t);case 3:return n=e.sent,e.next=6,n.blob();case 6:a=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:return e.abrupt("return",URL.createObjectURL(a));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function n(){return(n=Object(v.a)(h.a.mark((function a(){var n,r,c,u,s,l,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=[],r=!0,c=!1,u=void 0,a.prev=4,s=t[Symbol.iterator]();case 6:if(r=(l=s.next()).done){a.next=16;break}return i=l.value,a.t0=n,a.next=11,e(i);case 11:a.t1=a.sent,a.t0.push.call(a.t0,a.t1);case 13:r=!0,a.next=6;break;case 16:a.next=22;break;case 18:a.prev=18,a.t2=a.catch(4),c=!0,u=a.t2;case 22:a.prev=22,a.prev=23,r||null==s.return||s.return();case 25:if(a.prev=25,!c){a.next=28;break}throw u;case 28:return a.finish(25);case 29:return a.finish(22);case 30:o(n);case 31:case"end":return a.stop()}}),a,null,[[4,18,22,30],[23,,25,29]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[t]),i.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"image-container w-25-l w-50-m w-100-s pa2 relative ".concat(a.filter((function(e){return e===t+1})).length>0?"active":"")},r.a.createElement(x.LazyLoadImage,{alt:"image-".concat(t),effect:"blur",src:e}),r.a.createElement(l.b,{to:"/SinglePage/".concat(t+1),className:"image-link-container pa2"})))}))});var w=function(e){var t=e.handelFetchedImages,a=Object(n.useState)(""),c=Object(s.a)(a,2),u=c[0],l=c[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),m=o[0],f=o[1],p=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/data?query="+u);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,f(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t([m,u])}),[m]),r.a.createElement("div",{className:"wrap"},r.a.createElement("form",{className:"search",onSubmit:function(e){e.preventDefault(),p()}},r.a.createElement("input",{type:"text",className:"searchTerm",placeholder:"search in all documents?",onChange:function(e){l(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"search"})))},y=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)([]),o=Object(s.a)(u,2),m=o[0],f=o[1];return r.a.createElement(l.a,null,r.a.createElement("div",{className:"container flex w-100 flex-wrap "},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0},r.a.createElement(w,{handelFetchedImages:function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];f(a),c(n)}}),r.a.createElement(E,{imageIds:[1,2,3,4,5,6,7,8,9,10,11],selectedImages:m})),r.a.createElement(i.a,{exact:!0,path:"/singlePage/:imageId",render:function(e){return r.a.createElement(O,Object.assign({},e,{parentQuery:a}))}})," />")))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.9422f9bc.chunk.js.map